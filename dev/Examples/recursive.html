<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Recursive Generation · Supposition.jl Documentation</title><meta name="title" content="Recursive Generation · Supposition.jl Documentation"/><meta property="og:title" content="Recursive Generation · Supposition.jl Documentation"/><meta property="twitter:title" content="Recursive Generation · Supposition.jl Documentation"/><meta name="description" content="Documentation for Supposition.jl Documentation."/><meta property="og:description" content="Documentation for Supposition.jl Documentation."/><meta property="twitter:description" content="Documentation for Supposition.jl Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Supposition.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Main Page</a></li><li><a class="tocitem" href="../intro.html">Introduction to PBT</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="basic.html">Basic Usage</a></li><li><a class="tocitem" href="composition.html">Composing Generators</a></li><li class="is-active"><a class="tocitem" href="recursive.html">Recursive Generation</a></li><li><a class="tocitem" href="docalignment.html">Alignment of Documentation</a></li><li><a class="tocitem" href="target.html">Targeted Operation</a></li><li><a class="tocitem" href="stateful.html">Stateful Testing</a></li></ul></li><li><a class="tocitem" href="../ressources.html">PBT Ressources</a></li><li><a class="tocitem" href="../faq.html">FAQ</a></li><li><a class="tocitem" href="../interfaces.html">Interfaces</a></li><li><a class="tocitem" href="../benchmarks.html">Benchmarks</a></li><li><a class="tocitem" href="../api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href="recursive.html">Recursive Generation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="recursive.html">Recursive Generation</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Recursive-Generation"><a class="docs-heading-anchor" href="#Recursive-Generation">Recursive Generation</a><a id="Recursive-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Recursive-Generation" title="Permalink"></a></h1><p>In some situations, it is required to generate objects that can nest recursively. For example, JSON is an often used data exchange format that consists of various layers of dictionaries (with string keys) and one dimensional arrays, as well as strings, numbers, booleans an <code>Nothing</code>.</p><p>In Supposition.jl, we can generate these kinds of recursively nested objects using the <a href="../api.html#Supposition.Data.Recursive"><code>Data.Recursive</code></a> <code>Possibility</code>. For this, we need a generator of a basecase, as well as a function that wraps one generated example in a new layer by returning a new <code>Possibility</code>.</p><p>We can construct the <code>Possibility</code> that generates the basecase like so:</p><pre><code class="language-julia hljs">using Supposition

strings = Data.Text(Data.AsciiCharacters())
bools = Data.Booleans()
none = Data.Just(nothing)
numbers = Data.Floats{Float64}()
basecase = strings | numbers | bools | none</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Supposition.Data.OneOf{Union{Nothing, Bool, Float64, String}, 4}((Supposition.Data.Text(Supposition.Data.Vectors{Char, Supposition.Data.AsciiCharacters}(Supposition.Data.AsciiCharacters(), 0x0000000000000000, 0x000000000000000a)), Supposition.Data.Floats{Float64}(true, true), Supposition.Data.Booleans(), Supposition.Data.Just{Nothing}(nothing)))</code></pre><p>which gives us a <a href="../api.html#Supposition.Data.OneOf"><code>Data.OneOf</code></a>, a <code>Possibility</code> that can generate any one of the objects generated by the given <code>Possibility</code>.</p><p>For wrapping into new layers, we need a function that wraps our basecase <code>Possibility</code> and gives us a new <code>Possibility</code> generating the wrapped objects. For the JSON example, this means we can wrap an object either in a <code>Vector</code>, or a <code>Dict</code>, where the latter has <code>String</code> keys.</p><div class="admonition is-info"><header class="admonition-header">Wrapping order</header><div class="admonition-body"><p><code>Recursive</code> expects a function that takes a <code>Possibility</code> for generating the children of the wrapper object, which you should pass into a generator. The generator for the wrapper can be any arbitrary <code>Possibility</code>.</p></div></div><p>Defining that function like so:</p><pre><code class="language-julia hljs">function jsonwrap(child)
    vecs = Data.Vectors(child)
    dicts = Data.Dicts(strings, child)
    vecs | dicts
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">jsonwrap (generic function with 1 method)</code></pre><p>allows us to construct the <code>Possibility</code> for generating nested JSON-like objects:</p><pre><code class="language-julia hljs">json = Data.Recursive(basecase, jsonwrap; max_layers=3)
example(json)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Union{Nothing, Bool, Float64, Dict{String, Union{Nothing, Bool, Float64, String}}, String, Vector{Union{Nothing, Bool, Float64, String}}}} with 5 entries:
  &quot;!&quot;                 =&gt; -1.58772e111
  &quot;\e^Y\x1cq\bEj8&quot;    =&gt; -4.31286e-135
  &quot;^&quot;                 =&gt; Union{Nothing, Bool, Float64, String}[false]
  &quot;\x0f \t;lgC\e\x15&quot; =&gt; nothing
  &quot;Y266uYkn6&quot;         =&gt; -5.68895e-145</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="composition.html">« Composing Generators</a><a class="docs-footer-nextpage" href="docalignment.html">Alignment of Documentation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Monday 4 March 2024 13:35">Monday 4 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
