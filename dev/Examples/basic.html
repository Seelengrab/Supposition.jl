<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Usage · Supposition.jl Documentation</title><meta name="title" content="Basic Usage · Supposition.jl Documentation"/><meta property="og:title" content="Basic Usage · Supposition.jl Documentation"/><meta property="twitter:title" content="Basic Usage · Supposition.jl Documentation"/><meta name="description" content="Documentation for Supposition.jl Documentation."/><meta property="og:description" content="Documentation for Supposition.jl Documentation."/><meta property="twitter:description" content="Documentation for Supposition.jl Documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Supposition.jl Documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Main Page</a></li><li><a class="tocitem" href="../intro.html">Introduction to PBT</a></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href="basic.html">Basic Usage</a></li><li><a class="tocitem" href="composition.html">Composing Generators</a></li><li><a class="tocitem" href="recursive.html">Recursive Generation</a></li><li><a class="tocitem" href="docalignment.html">Alignment of Documentation</a></li><li><a class="tocitem" href="target.html">Targeted Operation</a></li><li><a class="tocitem" href="stateful.html">Stateful Testing</a></li><li><a class="tocitem" href="events.html">Events &amp; Oracle testing</a></li></ul></li><li><a class="tocitem" href="../resources.html">PBT Resources</a></li><li><a class="tocitem" href="../faq.html">FAQ</a></li><li><a class="tocitem" href="../interfaces.html">Userfacing API</a></li><li><a class="tocitem" href="../benchmarks.html">Benchmarks</a></li><li><a class="tocitem" href="../api.html">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href="basic.html">Basic Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="basic.html">Basic Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Seelengrab/Supposition.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Seelengrab/Supposition.jl/blob/main/docs/src/Examples/basic.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Basic-Usage"><a class="docs-heading-anchor" href="#Basic-Usage">Basic Usage</a><a id="Basic-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage" title="Permalink"></a></h1><p>At its core, property based testing (PBT) is about having a function (or set of functions) to test and a set of properties that should hold on that function. If you&#39;re already familiar with PBT, this basic example will be familiar to you already.</p><p>Consider this <code>add</code> function, which simply forwards to <code>+</code>:</p><pre><code class="language-julia hljs">function add(a,b)
    a + b
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">add (generic function with 1 method)</code></pre><p>How can we test that this function truly is the same as <code>+</code>? First, we have to decide what input we want to test with. In Supposition.jl, this is done through the use of <code>Possibilitiy</code> objects, which represent an entire set of objects of a shared type. In other frameworks like Hypothesis, this is known as a strategy. In our case, we are mostly interested in integers, so the generator <a href="../interfaces.html#Supposition.Data.Integers"><code>Data.Integers{UInt}</code></a> is what we&#39;re going to use:</p><pre><code class="language-julia hljs">using Supposition, Supposition.Data

intgen = Data.Integers{UInt}()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Supposition.Data.Integers{UInt64, UInt64}(0x0000000000000000, 0xffffffffffffffff)</code></pre><p>Now that we have our input generator, we have to decide on the properties we want to enforce. Here, we simply want to check the mathematical properties of addition, so let&#39;s start with commutativity:</p><pre><code class="language-julia hljs">Supposition.@check function commutative(a=intgen, b=intgen)
    add(a,b) == add(b,a)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Test Summary: | Pass  Total  Time
commutative   |    1      1  0.1s</code></pre><p><a href="../interfaces.html#Supposition.@check"><code>@check</code></a> takes a function definition where each argument is given a <code>Possibility</code>, runs those generators, feeds the generated values into the given function and shrinks any failing examples. Note that the name given in the arguments is the same as used in the function.</p><p>Here&#39;s an example for a failing property:</p><pre><code class="language-julia hljs">Supposition.@check function failprop(x=intgen)
    add(x, one(x)) &lt; x
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Error: Property doesn&#39;t hold!
│   Description = &quot;failprop&quot;
│   Example = (x = 0x0000000000000000,)
└ @ Supposition ~/work/Supposition.jl/Supposition.jl/src/testset.jl:292
Test Summary: | Fail  Total  Time
failprop      |    1      1  0.1s</code></pre><p>Supposition.jl successfully found a counterexample and reduced it to a more minimal counterexample, in this case just <code>UInt(0)</code>.</p><div class="admonition is-info"><header class="admonition-header">Overflow</header><div class="admonition-body"><p>There is a subtle bug here - if <code>x+1</code> overflows when <code>x == typemax(UInt)</code>, the resulting comparison is <code>true</code>: <code>typemin(UInt) &lt; typemax(UInt)</code> after all. It&#39;s important to keep these kinds of subtleties, as well as the invariants the datatype guarantees, in mind when choosing a generator and writing properties to check the datatype and its functions for.</p></div></div><p>We&#39;ve still got three more properties to test, taking two or three arguments each. Since these properties are fairly universal, we can also write them out like so, passing a function of interest:</p><pre><code class="language-julia hljs">associative(f, a, b, c) = f(f(a,b), c) == f(a, f(b,c))
identity_add(f, a) = f(a,zero(a)) == a
function successor(a, b)
    a,b = minmax(a,b)
    sumres = a
    for _ in one(b):b
        sumres = add(sumres, one(b))
    end

    sumres == add(a, b)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">successor (generic function with 1 method)</code></pre><p>And check that they hold like so. Of course, we can also test the property implicitly defined by <code>@check</code> earlier:</p><pre><code class="language-julia hljs">using Test

Supposition.@check associative(Data.Just(add), intgen, intgen, intgen)
Supposition.@check identity_add(Data.Just(add), intgen)
Supposition.@check successor(intgen, intgen)
Supposition.@check commutative(intgen, intgen)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Test Summary: | Pass  Total  Time
associative   |    1      1  0.0s
Test Summary: | Pass  Total  Time
identity_add  |    1      1  0.0s
Test Summary: | Pass  Total  Time
successor     |    1      1  0.0s
Test Summary: | Pass  Total  Time
commutative   |    1      1  0.0s</code></pre><p>In this way, we can even reuse properties from other invocations of <code>@check</code> with new, perhaps more specialized, inputs. For generalization, we can use <a href="../interfaces.html#Supposition.Data.Just"><code>Data.Just</code></a> to pass our <code>add</code> function to the generalized properties.</p><div class="admonition is-info"><header class="admonition-header">Nesting @testset</header><div class="admonition-body"><p>From Julia 1.11 onwards, <code>@check</code> can also report its own results as part of a parent <code>@testset</code>. This is unfortunately unsupported on 1.10 and earlier.</p></div></div><p>Be aware that while all checks pass, we <em>do not have a guarantee that our code is correct for all cases</em>. Sampling elements to test is a statistical process and as such we can only gain <em>confidence</em> that our code is correct. You may view this in the light of Bayesian statistics, where we update our prior that the code is correct as we run our testsuite more often. This is also true were we not using property based testing or Supposition.jl at all - with traditional testing approaches, only the values we&#39;ve actually run the code with can be said to be tested.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../intro.html">« Introduction to PBT</a><a class="docs-footer-nextpage" href="composition.html">Composing Generators »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Saturday 13 April 2024 06:16">Saturday 13 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
